<atlassian-plugin key="${atlassian.plugin.key}" name="${project.name}" plugins-version="2" xmlns="https://atlassian.com/schema/atlassian-plugin"
                  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                  xsi:schemaLocation="https://atlassian.com/schema/atlassian-plugin https://atlassian.com/schema/atlassian-plugin.xsd">
    <plugin-info>
        <description>${project.description}</description>
        <version>${project.version}</version>
        <vendor name="${project.organization.name}" url="${project.organization.url}" />
        <param name="plugin-icon">images/pluginIcon.png</param>
        <param name="plugin-logo">images/pluginLogo.png</param>
    </plugin-info>

    <!-- add our i18n resource -->
    <resource type="i18n" name="i18n" location="granite-pr-plugin"/>
 
<web-resource key="granite-pr-resources" name="Granite PR Resources">

  <resource type="download" name="main.css" location="static/css/main.css"/>
  <resource type="download" name="main.js"  location="static/js/main.js"/>
  <resource type="download" name="extension-bootstrap.js" location="static/js/extension-bootstrap.js"/>

  <context>bitbucket.page.pullrequest.detail</context>
  <context>bitbucket.ui.pullrequest.overview.summary</context>
</web-resource>


    <web-item key="hello-world-link" name="Hello World Link" section="system.header/left" weight="1000">
    <label>Hello World</label>
    <link>/plugins/servlet/hello-world</link>
    </web-item>

    <!-- Review React app bundle -->
<web-resource key="granite-pr-review-app" name="Granite PR Review App">
  <resource type="download" name="review.js" location="static/review/review.js"/>
   <resource type="download" name="review.css" location="static/review/review.css"/>
  <context>bitbucket.page.pullrequest.detail</context>
  <context>bitbucket.ui.pullrequest.overview.summary</context>
</web-resource>

  <web-resource key="granite-pr-review-link" name="Granite PR Review Link">
    <dependency>com.granite.pr-plugin.granite-pr-plugin:granite-pr-review-app</dependency>
      <resource type="download" name="review-tab-bootstrap.js" location="static/js/review-tab-bootstrap.js"/>
      <context>bitbucket.page.pullrequest.detail</context>
      <context>bitbucket.ui.pullrequest.overview.summary</context>
  </web-resource>

  <servlet
    name="Granite Retry Proxy"
    key="granite-retry-proxy"
    class="GranitePrPlugin.api.GraniteRetryProxyServlet">
    <url-pattern>/granite-review/*</url-pattern>
  <!-- Set your API Gateway invoke URL here -->
  <init-param>
    <param-name>targetUrl</param-name>
    <param-value>http://host.docker.internal:3000</param-value>
  </init-param>
</servlet>




    <servlet key="hello-world-servlet" name="Hello World Servlet" class="GranitePrPlugin.api.HelloWorldServlet">
    <url-pattern>/hello-world</url-pattern>
    </servlet>

    
</atlassian-plugin>